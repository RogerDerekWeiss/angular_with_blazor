# Overview

Using the default projects generated by the Angular CLI and .NET Core CLI, this project shows how to integrate Blazor WASM components to an Angular project

### Prerequisites
1. [Download and Install Node](https://nodejs.org/en/download/)
2. [Download and Install .NET 6 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/6.0)


### 1. Create the Angular Project
> See [Installing Angular CLI](https://angular.io/cli) to get started with a simple Angular project

1. ```ng new simple-angular-project```
1. ```cd simple-angular-project```
1. ```ng serve```


### 2. Create the Blazor Project
> See [Tooling for ASP.NET Core Blazor](https://docs.microsoft.com/en-us/aspnet/core/blazor/tooling?view=aspnetcore-6.0&pivots=macos) to get started with a simple Blazor project
1. ```dotnet new blazorwasm --name simple-blazor-project```
1. ```cd simple-blazor-project```
1. ```dotnet run```

#### 2.1 Add the required nuget packages
1. ```dotnet add package Microsoft.AspNetCore.Components.Web --version 6.0.0```

#### 2.2 Add the JSComponentGeneration Helper project to the simple-blazor-project
``` dotnet add reference ../js-component-generation-helpers/JSComponentGeneration/JSComponentGeneration.csproj```

#### 2.3 Add the build target that does the actual code generation to the angular project
> Unfortunately there is no CLI command for this step so it needs to be added manually by editing the **simple-blazor-project.csproj**
```xml
<!--Add this just before the closing </Project> tag-->
<Import Project="..\js-component-generation-helpers\JSComponentGeneration.Build\build\netstandard2.0\JSComponentGeneration.build.targets" />
```

#### 2.4 Create a Blazor Component
This step will create a standard Blazor Component and mark it with an Attribute tat it be generated as an Angular component using the `GenerateAngular` attribute
1. ```dotnet new razorcomponent --name BlazorInfo```
1. Relace the BlazorInfo.razor code with the following
```html
@using JSComponentGeneration.Angular
@attribute [GenerateAngular]

<h3>Blazor Info Component</h3>
<p>@Message</p>

@code {
    [Parameter] public string Message { get; set; } = "Default Message";
}
```

#### 2.5 Register the Blazor Component for Angular so that it can be downloaded by Angular
1. Add the following using clause to _simple-blazor-project/Program.cs_ ```using JSComponentGeneration.Angular;```
1. Add the following line to the builder ```builder.RootComponents.RegisterForAngular<BlazorInfo>();```


#### 2.6 Build the simple-blazor-project project 
From the _simple-blazor-project_ folder
```dotnet build```

#### 2.7 Integrator Blazor Components to Angular App
Add the newly generated components to _app.module.ts_ by addign the following lines:
```typescript
import { BlazorInfoComponent } from "./blazor-info/blazor-info.component";
```
In the declarations section:
```typescript
BlazorInfoComponent
```
In _index.html_ add the following script above the closing `body` tag
```javscript
  <script src="_framework/blazor.webassembly.js"></script>
```
Create a file _proxy.conf.json_ and  the angular _src_ folder
```json
{
    "/": { "target": "https://localhost:7025/", "secure": false }
}
```
> Note that `"secure"` values is _false_ above otherwise you will get a  DEPTH_ZERO_SELF_SIGNED_CERT error while proxying the request

#### 2.x Create a solution for the .NET projects (Optional)
From the **/src** folder:
1. ```dotnet new sln --name simple-blazor-project```
1. ```dotnet sln add simple-blazor-project/simple-blazor-project.csproj```
1. ```dotnet sln add js-component-generation-helpers/JSComponentGeneration/JSComponentGeneration.csproj```
1. ```dotnet sln add js-component-generation-helpers/JSComponentGeneration.Build/JSComponentGeneration.Build.csproj```

